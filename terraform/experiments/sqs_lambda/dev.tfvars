# =============================================================================
# 開発環境用 Terraform 変数定義ファイル
# =============================================================================
# このファイルは開発環境（dev）用の変数値を定義します。
# 使用方法: terraform plan -var-file="dev.tfvars"
# =============================================================================

# -----------------------------------------------------------------------------
# 基本設定
# -----------------------------------------------------------------------------

# 環境名: リソース名のプレフィックス/サフィックスとして使用
# 開発環境なので "dev" を指定
environment = "dev"

# プロジェクト名: リソースの命名規則に使用
# 注文処理システムを想定した名前
project_name = "order-processor"

# AWSリージョン: 東京リージョンを使用
# 理由: 日本からのレイテンシーが最小、日本語ドキュメントが充実
aws_region = "ap-northeast-1"

# -----------------------------------------------------------------------------
# Lambda 関数設定
# -----------------------------------------------------------------------------

# メモリサイズ (MB): 128MB〜10,240MBの範囲で指定可能
# 開発環境では最小値の128MBで十分（コスト削減）
# 注意: メモリに比例してCPUパワーも割り当てられる
lambda_memory_size = 128

# タイムアウト (秒): 1秒〜900秒（15分）の範囲で指定可能
# 30秒は一般的なAPI処理やメッセージ処理に十分な時間
# SQSのvisibility_timeoutより短くする必要がある
lambda_timeout = 30

# 予約済み同時実行数: 同時に実行できるLambdaインスタンスの最大数
# -1 = 制限なし（アカウント制限まで使用可能）
# 0 = 同時実行を完全に無効化
# 正の整数 = 指定した数に制限
# 
# 注意: AWSアカウントには最低10の未予約同時実行数を維持する必要がある
# そのため、小さい値を設定するとエラーになる場合がある
# 学習環境では -1（制限なし）を推奨
lambda_reserved_concurrent_executions = -1

# -----------------------------------------------------------------------------
# SQS キュー設定
# -----------------------------------------------------------------------------

# メッセージ保持期間 (秒): 60秒〜1,209,600秒（14日）の範囲
# 345600秒 = 4日間
# 開発環境では短めに設定（不要なメッセージの蓄積を防ぐ）
# 計算式: 4日 × 24時間 × 60分 × 60秒 = 345,600秒
sqs_message_retention_seconds = 345600

# 可視性タイムアウト (秒): 0秒〜43,200秒（12時間）の範囲
# メッセージが取得されてから、他のコンシューマーに見えなくなる時間
# Lambda のタイムアウト（30秒）と同じか、それ以上に設定
# 短すぎると: 処理中に同じメッセージが重複して処理される
# 長すぎると: 処理失敗時のリトライまでの待ち時間が長くなる
sqs_visibility_timeout_seconds = 30

# 最大受信回数: メッセージがDLQ（デッドレターキュー）に送られるまでの処理試行回数
# 3回失敗したらDLQに移動（問題のあるメッセージを隔離）
# 開発環境では少なめに設定してエラーを早期発見
sqs_max_receive_count = 3

# -----------------------------------------------------------------------------
# CloudWatch Logs 設定
# -----------------------------------------------------------------------------

# ログ保持期間 (日): 1, 3, 5, 7, 14, 30, 60, 90, 120, 150, 180, 365, 400, 545, 731, 1827, 3653 日から選択
# 開発環境では7日間（1週間）で十分
# コスト削減のため短めに設定（本番では30日以上を推奨）
log_retention_days = 7
